
# Welcome to MineAndSeek!

MineAndSeek is a minigame datapack designed by EternalLawn and implemented by LordKanelsnegle. It is intended for personal use, but we anticipate its growth and welcome the opportunity for matchmaking, player statistics, and the ability to play at any time.

# Game Design

The premise of the game offers a dangerously fun spin on hide and seek, with players having access to specialized classes that can shift the tides of victory with their unique abilities. Players are divided into two factions, "Hunters" and "Survivors", and spend up to 10 minutes in pre-created maps trying to achieve victory for their faction. 
- Hunters are designed to seek and defeat Survivors; they win if they can defeat all Survivors before time runs out.
- Survivors are designed to hinder Hunters and protect themselves and their allies; they win if at least one Survivor remains standing when time runs out.

## Hunters (Experimental)

<details>
  <summary>Clyde: The Savage</summary>
  
  > Once a hardworking family man and butcher, now a raging figure driven by an indiscriminate desire to do what butchers do best. Simple to play, hard to escape.
  
  > **Weapon - The Cleaver**
  <br>High Damage Axe (Iron)
  
  > **Passive - Bloodlust**
  <br>Can hear the heartbeat of nearby Survivors and gains a 20% speed boost (Speed 1) when close. 
  <br>*“Your heart is stricken. My footsteps quicken.”*
  
  > **Active - Unrelenting**
  <br>Enter a state of rage which gives you 20% speed (Speed 1), apply witcher damage with all attacks(1 heart), and become temporarily immune to debuffs (not including ultimate abilities) for 8s. (CD: 40s) 
  <br>*“Death couldn’t stop me. Did you think you could?”*
  
  > **Ultimate - Scream for Me**
  <br>Spread a nightmare-inducing Paranoia effect to all Survivors, scrambling their senses (nausea and blindness) for 8 seconds. 
  <br>*“Squeal for me, piggies!”*
</details>

<details>
  <summary>Percival: The Tracker</summary>
  
  > Originally a caretaker of the forest, he watched as The Corruption slowly mutated his animal companions into horrific zombies but cared for them all the same. After witnessing a group of Survivors hunting them down, he swore that the hunters would become the hunted. Silent as a breeze, deadly as a storm. 
  
  > **Weapon - Shadowstrike, Ol' Reliable**
  <br>Medium Damage Bow, Low Damage Sword (Wooden)
  
  > **Passive - Eagle's Eye**
  <br>All arrows reveal targets and prevents them form healing for 1 second.
  <br>*“Justice is blind, but I am not.”*
  
  > **Active - Ensared**
  <br>Plant a trap at your position and enter stealth for a brief period. Trap placement is permanent and disappears if triggered (3 block XZ radius) or if ability is used again, and stealth (invisibility) lasts 5 seconds. Traps root and reveal victims within range for 2 seconds. (CD: 30s).
  <br>*“Don’t scream too much.”*
  
  > **Ultimate - You Can't Hide**
  <br>Fire a global, wide (5 block radius), wall-piercing shot that deals tremendous damage (8 hearts) to all unfortunate enough to be caught in its path. You will hear a scream if any Survivors are hit.
  <br>*“You don’t deserve to live.”*
</details>

<details>
  <summary>Minerva: The Wicked</summary>
  
  > A proud, fallen queen who was blood-bound to protect thousands of lives - she ruined all of them. A master manipulator who can get even the dead to do her bidding, she thrives off the power her subjects provide. Tricky and oppressive when left unchecked.
  
  > **Weapon - Black Scythe**
  <br>Low Damage Hoe (Netherite)
  
  > **Passive - Eerie Presence**
  <br>The game starts with zombies scattered around the map. Summon a Zombie at your position every 30 seconds. Your zombies are revealed to you and will attack only Survivors. 
  <br>*“If only I were you, so that I too could serve such a beautiful queen.”*
  
  > **Active - Soul Release**
  <br>Teleport to a zombie that you are looking at, consuming it in the process. Spawn a zombie where you were standing originally. (CD: 20s). 
  <br>*“You are dismissed.”*
  
  > **Ultimate - For the Queen!**
  <br> Spawn a bloodthirsty creeper directly behind every Survivor. These minions have increased speed and will explode to deal damage. Their maximum lifetime before exploding is 8s. 
  <br>*“Seek and destroy.”*
</details>

<details>
  <summary>{WIP} Hunter // Troy: The Drowned</summary>
  
  > A man of the sea, he assumed her tides could protect him from The Corruption. He gathered all of his loved ones onto his boat and sailed off, safe at last - only to find that he was gravely mistaken. His command of the waves was all that remained.
  
  > **Weapon - The Kraken** 
  <br>Low Damage Trident
  
  > **Passive - Downpour**
  <br>The map remains in a perpetual downfall. Experience no slowdown in water.
  <br>*“A cloud hangs over us all.”*
  
  > **Active - Kraken's Propulsion**
  <br>Hold your trident to charge it while exposed to water. Dash in the direction you are facing, proportional to the charge time. (CD: 20s). 
  <br>*“You can't escape the Kraken.”*
  
  > **Ultimate - Phantom Flood**
  <br> Leave a trail of water wherever you walk for 20 seconds. 
  <br>*“Wash them away.”*
</details>


## Survivors (Experimental)
Survivors are designed with roles, as opposed to Hunters.

<details>
  <summary>Tina Nelson Tucker: The TNT [Controller]</summary>
  
  > ~~Science gave mankind the power to reach for the stars, but also to inevitably crash and burn. Too bad Tina forgot the first part. The tools she made as a nuclear engineer for the government failed to stop Aurora, but what better way to make up for it than destroying everything the Corruption brought with it?~~
  
  > **Weapon - Sparky**
  <br>Flint and Steel
  
  > **Passive - Crackhead Energy**
  <br>Your alchemical genius (or craziness) allows you to craft another potion while crouching for 8 seconds. 
  <br>*“I dunno who Geneva is but she better get her convention up on outta here.”*
  
  > **Active - Bubbly Boys**
  <br>Throw a mysterious concoction that slows Hunters by 45% (Slowness 3) and reduces their damage (Weakness 1) for 5s; also deals damage to enemy deployables. Can hold up to 3. 
  <br>*“How z’at taste?”*
  
  > **Ultimate - Fat Man**
  <br>Drop a hazardous bomb, causing all afflicted Hunters to become dizzy (Nether Transport Effect) and eventually black out. They awake 3 seconds later, back at at the Survivor spawn point. 
  <br>*“Smell that? Me neither! My nose don’t work.”*
 
</details>

<details>
  <summary>Scarecrow: The Still [Support]</summary>
  
  > A passionate and extremely talented farmer who gets into his work – REALLY into his work. The last in a long line of agricultural geniuses, he watched as the Terrorforming soiled the land and caused untamed beasts to desecrate his family’s hard work. He now takes it upon himself to patiently stand among the Survivors’ much-needed crops from sunrise to sunset and protects them with his life, while ending the life of any that test his patience. 
  
  > **Weapon - Wooden Arm**
  <br>Stick
  
  > **Passive - Undying Patience**
  <br>Grant self and nearby allies (within 10 blocks) 20% damage reduction (Protection 1). If a hunter deals 5 hearts of your health worth of damage to you, they are stunned for 1s. 
  <br>*“The seed of protection has been planted, and I will watch it grow.”*
  
  > **Active - Wind Dance**
  <br>Heal yourself and nearby allies in a large range (10 block radius, upon casting) for 3 hearts. They gain 40% additional damage reduction (Protection 2). (CD: 40). 
  <br>*“I shall protect the harvest.”*
  
  > **Ultimate - One For All**
  <br>Root yourself into the ground, granting all other Survivors immunity to damage and debuffs for 8 seconds. Reveals you to all Hunters.
  <br>*“Here to defend. Here to stay.”*
 
</details>

<details>
  <summary>Ava: The Seer [Scout]</summary>
  
  > Blinded and cast out as a child, she roamed the forest until she knew every nook of every tree. The animals and spirits were merciful to her when her life wasn’t, becoming her new family. Once she became 18, she decided she was strong enough to seek her brother who unbeknown to her had become a Hunter. Perhaps it’s a blessing that she cannot see how her world was corrupted.
  
  > **Weapon - Agony**
  <br>Bow
  
  > **Passive - Eye for an Eye**
  <br>Your weapon shots inflict Blindness on Hunters for 1 second. 
  <br>*“I may have lost sight, but I still have vision.”*
  
  > **Active - Guide Me**
  <br>Spawn a sentry Hawk in your location,. Up to 2 can exist at a time, placing a third will remove the first, etc. Hawks reveal nearby Hunters within 8 blocks. then heal all Survivors for 2 hearts. (CD: 30s). 
  <br>*“Please, be my eyes.”*
  
  > **Ultimate - The Overseer**
  <br>Spawn an Bear behind a random Hunter. The Bear has high health (20 hearts) and prevents Hunters from using their abilities until killed or until it despawns after 15s.
  <br>*“Guardian, stall them!”*
 
</details>

<details>
  <summary>Princess Stormbliss: The Blizzard [Controller]</summary>
  
  > The daughter of a queen who ruled through fear and tyranny, she now seeks to chill the flames of destruction caused by not only the Corruption, but her mother too.
  
  > **Weapon - Snowballs**
  <br>Snowballs
  
  > **Passive - Permafrost**
  <br>Your snowballs knockback and slow Hunters by 15% (Slowness 1) for 1 second. 
  <br>*“You’ve bathed the world in red, now I will bathe it in white.”*
  
  > **Active - Loyal Subjects**
  <br>Summon a loyal snowman who runs up to nearby Hunters and explode, freezing (ensnare with snow effect) them for 2 seconds. (CD: 40). 
  <br>*“Freeze them in time.”*
  
  > **Ultimate - White Blood**
  <br>Call upon your winter powers to summon a blizzard that follows all Hunters, slowing them (Slowness 6) and obscuring their vision (powdered snow effect) for 10 seconds. 
  <br>*“Your hearts are frozen.”*
 
</details>

<details>
  <summary>Jasone: The Kid [Scout]</summary>
  
  > A kid from a poor family with nothing but the clothes on his back and lightning running through his veins. He grew up aspiring to become an athlete and becoming famous enough to pull his family out of the gutter; now the corruption may have taken his family, but not his energy. They say lightning doesn’t strike in the same place twice, but that’s because they haven’t seen Jasone.
  
  > **Weapon - Ego**
  <br>Blaze Rod
  
  > **Passive - Adrenaline Rush**
  <br>Gain a speed boost (Speed 1) when hit and reveal the Hunter who attacked you for 2 seconds.
  <br>*“Adrenaline is the only performance drug I need.”*
  
  > **Active - Spark Mark**
  <br>Plant a Mark at your position and gain movement speed (Speed 1) for 6 seconds. Reactivating the skill within this duration returns you to your Mark. (CD: 40s)
  <br>*“On your marks... get set... go!”*
  
  > **Ultimate - Flash**
  <br>Channel the vengeance of your ancestors to strike all Hunters on the map with searing Lightning, stunning them for 1 second (Lightning effect), and increasing your speed (Speed 2) for each Hunter hit for 8 seconds.
  <br>*“Say cheese!”*
 
</details>

<details>
  <summary>{WIP} // Zombie McDeadface: The Undead [Controller]</summary>
  
  > WIP
  
  > **Weapon - These Hands:**
  <br>Rotten Flesh
  
  > **Passive - Bloodlust**
  <br>Your ability does not have a cooldown and instead uses 4 hearts of health. If Hunters are successfully hit by your ability, you gain 2 hearts for every Hunter hit. 
  
  > **Active - Why is it Spicy?**
  <br>Fire a large wall-piercing beam of energy that inflicts Nausea and Slows all Hunters in its path for 5 seconds. This also damages deployables. *“Pardon me.”*
  
  > **Ultimate - Table Turner**
  <br>Turn all Hunters into Zombies for 5 seconds. *“Have a taste of your own medicine!”*
 
</details>

<details>
  <summary>{WIP} // Zane: The Gambler [Scout]</summary>
  
  > WIP
  
  > **Weapon - Bang for your Buck**
  <br>Gun (Crossbow)
  
  > **Passive - **
  <br>WIP
  
  > **Active - Test of Fate**
  <br>Heal for 1 heart, then flip a coin, if it’s heads reveal all hunters on the map for 4 seconds, if it’s tails you are revealed for 1 second. (CD: 30s)
  
  > **Ultimate - Stock Exchange**
  <br>All Hunters have their positions swapped, then you swap places with one of those Hunters and grant all Hunters nausea for 5 seconds. *“It’s your problem now.”*
 
</details>

<details>
  <summary>{WIP} // Cascade: The Surfer [Support]</summary>
  
  > WIP
  
  > **Weapon - Finny**
  <br>Fish
  
  > **Passive - My Dude**
  <br>The spirit of your dolphin buddy watches over you and your nearby allies, regenerating 1 heart of health every 20 seconds.
  
  > **Active - Fintastic!**
  <br>Summon the spirit of Fin who hovers on the spot, granting nearby allies 20% movement speed and regenerates 1 every 10 seconds, this only applies to allies in range. (CD: 40s).
  
  > **Ultimate - Dolphin Rush**
  <br>Summon a spirit of Fin over the shoulders of you and your allies. He protects them by healing them for 1 heart every second, attacking nearby deployables and Hunters with water projectiles, and grants Haste for 8 seconds.
 
</details>

# Folders

All of the folders of interest are in `data/mas`, so assume all folders discussed are in that directory unless otherwise specified.

## Functions

This folder contains chunks of code known as "functions", which can be run individually. Some of these are called every tick while others are called at specific times.

### Game
Contains the functions that interact directly with the game itself, such as the state logic, map logic, and tickwise effects.

### Players
Contains the player-facing functions, which apply some basic checks before running the underlying `game/state` functions. This includes joining/leaving the game and moderator commands in case something goes wrong.

### Scripts
Contains the functions needed for installing/uninstalling the datapack, these shouldn't need to change too often. Any variables or scoreboards and such that are needed for the game to work properly should be initialized in the `install` function and removed in the `uninstall` function.

### Tests
Contains functions used for testing and debugging.

## Predicates

This folder contains the predicates used to determine whether certain functions should execute. At the moment this mainly revolves around checking map sizes to determine player counts and match durations.

## Tags

This folder contains the tags used to group different things together, such as functions or blocks. Now, we only use the tags to group together the functions needed for setting up the datapack, though in the future they could be used for other things. For instance, rather than checking for 5 different block types individually, you could group them and check for a specific tag.

# To-Do

The to-do's of this project are ever-changing, but this is a tentative list of what work there is to be done.

## Features

All features currently being worked on can be found [here](https://github.com/LordKanelsnegle/MineAndSeek/issues?q=is%3Aopen+is%3Aissue+label%3Afeature).

## Bugs

All bugs and feature requests can be found under the [Issues](https://github.com/LordKanelsnegle/MineAndSeek/issues) tab. Feel free to open one yourself!

## Balancing

Any balancing changes that need to be made can be found here. These are generally medium-priority.
- None

## New Concepts

Any new ideas or WIP classes/abilities/etc can be found here. These are generally low-priority.
- **Beacons** - The Corruption Beacon system is an objective-based addition to Mine and Seek that incentivizes players to outsmart each other and promote active gameplay. Every 3 minutes these beacons will spawn at one of the predetermined points (usually two or three) on each map randomly. The arrival of these points is broadcast to all players. Survivors must remain in the 7x7 zone to charge a meter for a short time, and upon completion, a portion of time is removed from the overall timer, hastening their chances for victory. This will naturally attract Hunters, who can occupy the zone to remove the meter’s progress is the Survivors were chased off before they could finish.

## Caveats
Any bugs or issues that are version-dependent or faults with Minecraft itself can be found here. They won't be actively worked on, but are worth noting for future reference in case they eventually get fixed.
- None

# Coding Conventions

There are some very important coding conventions that need to be adhered to, such as the naming of certain variables or tags. These will be updated as time goes on and are currently as follows:
- All tag, scoreboard, and variable names should be prefixed with `mas.` to reduce the chance of conflict with other datapacks
- Dummy variables in scoreboards should be prefixed with # to avoid accidentally setting values for players with the same name - even if players won't be added to that list
- Use `_` to join multiple words in a variable name, e.g. `#round_timer` NOT `#round.timer`
- Constant values should be set up as enums rather than being hardcoded, using the correct section of `mas.constants`, and must be CAPS_CASE to indicate that they are constants
- Every file should have a comment describing it at the top and comments dividing the functionality into sections. Otherwise, comments are only needed when the code is not self-explanatory
- If there's something that should be revisited in the future, add a `TODO (priority):` where `priority` is either `low`, `medium`, or `high`. Ideally this should only be used in the `Notes` section of a file
- All entities spawned by the datapack MUST have the tag `mas.entity` for cleanup. VERY IMPORTANT!
- Try to keep things self-contained; namely, map-related things should ONLY be used within map files, such as the `#map` enum
- Always use `type` and `limit` (where applicable) for entity searches, even if it's a situation where doing so feels redundant
- Respect `global.ignore` flags when selecting entities without MaS-specific tags - more info [here](https://mc-datapacks.github.io/en/conventions/global_ignoring_tag.html)

# Final Notes

The following bits of information are not may prove to be interesting or useful in the future:
- Function execution priority: User Commands > Tick > Schedules (in order of scheduling)
- Functions execute sequentially and fully, as if you copy pasted the entire function into where it was called
- There are 4 possible inputs for any given item: f (switch to offhand), left click, right click, q (drop item)
- There are 2 modifiers that could be combined with an input or used on their own: shift (crouch), space (jump)
- Play areas must be `/forceload`ed to ensure the game entities (like spawn markers) are loaded
- [Right-Click Detection](https://www.youtube.com/watch?v=xcOw4conrVM)
- [Raycasting](https://www.youtube.com/watch?v=RTRYfrli8GU)
- [Structures via Datapack](https://www.youtube.com/watch?v=kzme5WV0plM)
- [Command Generator](https://mcstacker.net/)
- [Other Tools](https://misode.github.io/)
- [Statistics](https://minecraft.fandom.com/wiki/Statistics#List_of_custom_statistic_names)
- [MC Wiki Resources](https://www.reddit.com/r/MinecraftCommands/wiki/resources)
- [Per-Class Skins p1](https://www.youtube.com/watch?v=ny5k8-looII)
- [Per-Class Skins p2](https://www.reddit.com/r/MinecraftHelp/comments/kd3j0n/how_do_i_change_armor_texture_to_look_like_skin/)
- [`summon snowball ~ ~ ~ {NoGravity:1b,Invulnerable:1b,Item:{id:"minecraft:diamond_block",Count:1b}}`](https://gyazo.com/4f60726046654ec8e1d7780622466bdb)
